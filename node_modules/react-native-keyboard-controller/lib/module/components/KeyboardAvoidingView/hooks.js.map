{"version":3,"names":["useLayoutEffect","Platform","useSharedValue","useKeyboardContext","useKeyboardHandler","OS","useKeyboardAnimation","reanimated","heightWhenOpened","height","progress","isClosed","initialHeight","value","initialProgress","onStart","e","onMove","onInteractive","onEnd","useTranslateAnimation","padding","translate"],"sources":["hooks.ts"],"sourcesContent":["import { useLayoutEffect } from \"react\";\nimport { Platform } from \"react-native\";\nimport { useSharedValue } from \"react-native-reanimated\";\n\nimport { useKeyboardContext } from \"../../context\";\nimport { useKeyboardHandler } from \"../../hooks\";\n\nconst OS = Platform.OS;\n\nexport const useKeyboardAnimation = () => {\n  const { reanimated } = useKeyboardContext();\n\n  const heightWhenOpened = useSharedValue(0);\n  const height = useSharedValue(0);\n  const progress = useSharedValue(0);\n  const isClosed = useSharedValue(true);\n\n  useLayoutEffect(() => {\n    const initialHeight = -reanimated.height.value;\n    const initialProgress = reanimated.progress.value;\n\n    // eslint-disable-next-line react-compiler/react-compiler\n    heightWhenOpened.value = initialHeight;\n    height.value = initialHeight;\n    progress.value = initialProgress;\n    isClosed.value = initialProgress === 0;\n  }, []);\n\n  useKeyboardHandler(\n    {\n      onStart: (e) => {\n        \"worklet\";\n\n        if (e.height > 0) {\n          isClosed.value = false;\n          heightWhenOpened.value = e.height;\n        }\n      },\n      onMove: (e) => {\n        \"worklet\";\n\n        progress.value = e.progress;\n        height.value = e.height;\n      },\n      onInteractive: (e) => {\n        \"worklet\";\n\n        progress.value = e.progress;\n        height.value = e.height;\n      },\n      onEnd: (e) => {\n        \"worklet\";\n\n        isClosed.value = e.height === 0;\n\n        height.value = e.height;\n        progress.value = e.progress;\n      },\n    },\n    [],\n  );\n\n  return { height, progress, heightWhenOpened, isClosed };\n};\nexport const useTranslateAnimation = () => {\n  const { reanimated } = useKeyboardContext();\n\n  const padding = useSharedValue(0);\n  const translate = useSharedValue(0);\n\n  useLayoutEffect(() => {\n    // eslint-disable-next-line react-compiler/react-compiler\n    padding.value = reanimated.progress.value;\n  }, []);\n\n  useKeyboardHandler(\n    {\n      onStart: (e) => {\n        \"worklet\";\n\n        if (e.height === 0) {\n          padding.value = 0;\n        }\n        if (OS === \"ios\") {\n          translate.value = e.progress;\n        }\n      },\n      onMove: (e) => {\n        \"worklet\";\n\n        if (OS === \"android\") {\n          translate.value = e.progress;\n        }\n      },\n      onInteractive: (e) => {\n        \"worklet\";\n\n        padding.value = 0;\n\n        translate.value = e.progress;\n      },\n      onEnd: (e) => {\n        \"worklet\";\n\n        padding.value = e.progress;\n\n        if (OS === \"android\") {\n          translate.value = e.progress;\n        }\n      },\n    },\n    [],\n  );\n\n  return { translate, padding };\n};\n"],"mappings":"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","ignoreList":[]}